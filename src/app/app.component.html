<app-header [state]="state"></app-header>

<div class="app-shell">
    <main>
        <section class="wizard">
            <div class="wizard-card">
                <div class="wizard-copy">
                    <p class="eyebrow">Start from scratch</p>
                    <h1>Build a budget that fits your household.</h1>
                    <p class="lead">
                        Answer a few basics. This is the foundation for your budget plan.
                    </p>
                    @if (state.onboarded) {
                        <div class="wizard-status">
                            Saved to this device. Reset to edit these fields.
                        </div>
                    }
                </div>
                <form class="wizard-form" [formGroup]="wizardForm" (ngSubmit)="completeWizard()">
                    <div>
                        <label class="form-label">Household name</label>
                        <input class="form-control" formControlName="householdName" placeholder="Smith Household">
                        @if (wizardForm.get('householdName')?.touched && wizardForm.get('householdName')?.invalid) {
                            <div class="form-error">Required.</div>
                        }
                    </div>
                    <div>
                        <label class="form-label">Primary budget name</label>
                        <input class="form-control" formControlName="budgetName" placeholder="Family Budget">
                        @if (wizardForm.get('budgetName')?.touched && wizardForm.get('budgetName')?.invalid) {
                            <div class="form-error">Required.</div>
                        }
                    </div>
                    <div>
                        <label class="form-label">Budget style</label>
                        <select class="form-select" formControlName="budgetStyle">
                            <option value="">Select one</option>
                            <option value="Zero-based">Zero-based</option>
                            <option value="50/30/20">50/30/20</option>
                            <option value="Envelope">Envelope</option>
                            <option value="Custom">Custom</option>
                        </select>
                        @if (wizardForm.get('budgetStyle')?.touched && wizardForm.get('budgetStyle')?.invalid) {
                            <div class="form-error">Required.</div>
                        }
                    </div>
                    <div>
                        <label class="form-label">Budget month</label>
                        <input class="form-control" formControlName="budgetMonth" placeholder="February 2026">
                        @if (wizardForm.get('budgetMonth')?.touched && wizardForm.get('budgetMonth')?.invalid) {
                            <div class="form-error">Required.</div>
                        }
                    </div>
                    <div>
                        <label class="form-label">Income frequency</label>
                        <select class="form-select" formControlName="incomeFrequency">
                            <option value="">Select one</option>
                            <option value="Monthly">Monthly</option>
                            <option value="Bi-weekly">Bi-weekly</option>
                            <option value="Semi-monthly">Semi-monthly</option>
                            <option value="Weekly">Weekly</option>
                            <option value="Custom">Custom</option>
                        </select>
                        @if (wizardForm.get('incomeFrequency')?.touched && wizardForm.get('incomeFrequency')?.invalid) {
                            <div class="form-error">Required.</div>
                        }
                    </div>
                    <div>
                        <label class="form-label">Income amount (per pay period)</label>
                        <input class="form-control" type="number" formControlName="incomeAmount" placeholder="0">
                    </div>
                    <div class="wizard-actions">
                        <button
                            class="btn btn-primary btn-lg"
                            type="submit"
                            [disabled]="wizardForm.invalid || wizardForm.disabled"
                        >
                            Save and continue
                        </button>
                        <button class="btn btn-outline-dark btn-lg" type="button" (click)="resetState()">
                            Start over
                        </button>
                    </div>
                </form>
            </div>
        </section>
    </main>
</div>

<app-footer></app-footer>
